<Window x:Class="HotelBooking.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="Бронирование гостиницы" Height="650" Width="800">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <GroupBox Grid.Row="0" Header="Добавить бронирование" Margin="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0">
                    <TextBlock Text="ФИО клиента" Margin="5,0"/>
                    <TextBox x:Name="txtFullName" Margin="5" Text="{Binding FullName, UpdateSourceTrigger=PropertyChanged}"/>

                    <TextBlock Text="Тип номера" Margin="5,10,5,0"/>
                    <ComboBox x:Name="cmbRoomType" Margin="5" SelectedIndex="0"
                              SelectionChanged="cmbRoomType_SelectionChanged">
                        <ComboBoxItem>Одноместный</ComboBoxItem>
                        <ComboBoxItem>Двухместный</ComboBoxItem>
                        <ComboBoxItem>Люкс</ComboBoxItem>
                        <ComboBoxItem>Делюкс</ComboBoxItem>
                    </ComboBox>

                    <TextBlock x:Name="txtRoomPrice" Margin="5,0,5,10" 
                               FontWeight="Bold" Foreground="DarkGreen"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0" Margin="0,10,5,0">
                            <TextBlock Text="Дата заезда" Margin="5,0"/>
                            <DatePicker x:Name="dpCheckIn" Margin="5" SelectedDate="{x:Static sys:DateTime.Now}"
                                        SelectedDateChanged="DatePicker_SelectedDateChanged"/>
                        </StackPanel>
                        <StackPanel Grid.Column="1" Margin="5,10,0,0">
                            <TextBlock Text="Дата выезда" Margin="5,0"/>
                            <DatePicker x:Name="dpCheckOut" Margin="5" SelectedDate="{x:Static sys:DateTime.Now}"
                                        SelectedDateChanged="DatePicker_SelectedDateChanged"/>
                        </StackPanel>
                    </Grid>

                    <TextBlock x:Name="txtPricePreview" Margin="5,10" FontWeight="Bold" Foreground="Blue"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Width="200" VerticalAlignment="Center">
                    <Button x:Name="btnLoadImage" Content="Загрузить изображение" 
                            Margin="10" Height="30" Click="btnLoadImage_Click"/>
                    <Image x:Name="imgPreview" Height="150" Margin="10" Stretch="Uniform"/>
                    <Button x:Name="btnBook" Content="Забронировать" 
                            Margin="10" Height="40" FontWeight="Bold" Click="btnBook_Click"/>
                </StackPanel>
            </Grid>
        </GroupBox>

        <GroupBox Grid.Row="1" Header="Список бронирований" Margin="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="200"/>
                </Grid.ColumnDefinitions>

                <DataGrid x:Name="dgBookings" AutoGenerateColumns="False" 
                          SelectionChanged="dgBookings_SelectionChanged"
                          ItemsSource="{Binding Bookings}">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ФИО" Binding="{Binding FullName}" Width="*"/>
                        <DataGridTextColumn Header="Тип номера" Binding="{Binding RoomType}" Width="120"/>
                        <DataGridTextColumn Header="Цена/сутки" Binding="{Binding RoomPricePerDay}" Width="120"/>
                        <DataGridTextColumn Header="Заезд" Binding="{Binding CheckInDate, StringFormat=dd.MM.yyyy}" Width="80"/>
                        <DataGridTextColumn Header="Выезд" Binding="{Binding CheckOutDate, StringFormat=dd.MM.yyyy}" Width="80"/>
                        <DataGridTextColumn Header="Сумма" Binding="{Binding TotalPrice, StringFormat={}{0} руб.}" Width="100"/>
                    </DataGrid.Columns>
                </DataGrid>

                <Image x:Name="imgSelected" Grid.Column="1" 
                       Margin="10" Stretch="Uniform"
                       Source="{Binding SelectedItem.Image, ElementName=dgBookings}"/>
            </Grid>
        </GroupBox>
    </Grid>
</Window>
